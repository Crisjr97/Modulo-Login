{{> header-auth}}
<div class="container" id="container">
    <!-- Row -->
    <div class="row">
        <!-- Sign Up -->
        <div class="col align-center flex-col sign-up">
        </div>
        <!-- End Sign Up -->

        <!-- login -->
        <div class="col align-center flex-col sign-in">
            <div class="form-wrapper align-center">
                <form class="form sign-in formulario" id="formulario">
                    <div class="input-group formulario__grupo" id="grupo__correo">
                        <i class="fas fa-envelope"></i>
                        <div class="formulario__grupo-input">
                            <input type="email" class="formulario__input" placeholder="Correo" name="correo" id="correo"
                                onfocus="myFunction()" required />

                        </div>
                        <p class="formulario__input-error">El correo solo puede contener letras, numeros, puntos,
                            guiones y guion bajo.</p>
                    </div>

                    <div class="input-group formulario__grupo" id="grupo__password">
                        <i class="fas fa-lock"></i>
                        <div class="formulario__grupo-inpu">
                            <input class="formulario__input" name="password" id="password" type="password"
                                placeholder="Contraseña" onfocus="myFunction()" required />
                        </div>
                        <p class="formulario__input-error">La contraseña tiene que ser de 4 a 12 dígitos.</p>
                    </div>

                    <div class="formulario__mensaje" id="formulario__mensaje">
                        <p><i class="fas fa-exclamation-triangle"></i> <b>Error:</b> Por favor rellena el formulario
                            correctamente. </p>
                    </div>

                    <div class="formulario__grupo formulario__grupo-btn-enviar">
                        <button type="submit" class="formulario__btn">Iniciar Sesión</button>

                    </div>

                    <p>
                        <b><a href="recuperacion.html">Olvidaste tu contraseña?</a></b>
                    </p>

                </form>

            </div>

        </div>
        <!-- End login -->
    </div>
    <!-- End Row -->
    <!-- Content Section -->
    <div class="row content-row">
        <!-- login Content -->
        <div class="col align-items flex-col">
            <div class="text sign-in">
                <h2>Registro de <br> calificaciones UNAH</h2>

            </div>
            <div class="img sign-in">
                <img src="../img/bg1.svg" alt="" />
            </div>
        </div>
    </div>
</div>
<!-- End Container -->

{{!-- script validación--}}
<script>
    const formulario = document.getElementById('formulario');
    const inputs = document.querySelectorAll('#formulario input');

    const expresiones = {
        password: /^.{4,12}$/, // 4 a 12 digitos.
        correo: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,
        usuario: /^[a-zA-ZÀ-ÿ0-9\_\-\s]{4,50}$/, // Letras y espacios, pueden llevar acentos
    };

    const campos = {
        password: false,
        correo: false,
        usuario: false,
    };

    const validarFormulario = (e) => {
        switch (e.target.name) {
            case 'password':
                validarCampo(expresiones.password, e.target, 'password');
                break;
            case 'correo':
                validarCampo(expresiones.correo, e.target, 'correo');
                break;
            case 'usuario':
                validarCampo(expresiones.usuario, e.target, 'usuario');
                break;
        }
    };

    const validarCampo = (expresion, input, campo) => {
        if (expresion.test(input.value)) {
            document.getElementById(`grupo__${campo}`).classList.remove('formulario__grupo-incorrecto');
            document.getElementById(`grupo__${campo}`).classList.add('formulario__grupo-correcto');
            document.querySelector(`#grupo__${campo} .formulario__input-error`).classList.remove('formulario__input-error-activo');
            campos[campo] = true;
        } else {
            document.getElementById(`grupo__${campo}`).classList.add('formulario__grupo-incorrecto');
            document.getElementById(`grupo__${campo}`).classList.remove('formulario__grupo-correcto');
            document.querySelector(`#grupo__${campo} .formulario__input-error`).classList.add('formulario__input-error-activo');
            campos[campo] = false;
        }
    };

    inputs.forEach((input) => {
        input.addEventListener('keyup', validarFormulario);
        input.addEventListener('blur', validarFormulario);
    });

    formulario.addEventListener('submit', (e) => {
        e.preventDefault();

        const terminos = document.getElementById('terminos');
        if (campos.usuario && campos.password && campos.correo && terminos.checked) {
            formulario.reset();

            document.getElementById('formulario__mensaje-exito').classList.add('formulario__mensaje-exito-activo');
            setTimeout(() => {
                document.getElementById('formulario__mensaje-exito').classList.remove('formulario__mensaje-exito-activo');
            }, 5000);
        } else {
            document.getElementById('formulario__mensaje').classList.add('formulario__mensaje-activo');
        }
    });

</script>
{{> footer-auth}}